args:
  crt:
    flags:
    - --crt
    action: store_const
    const: crt
    default: ''
    help:
      'Create empty crt assistant'

  mod:
    flags:
    - --mod
    action: store_const
    const: mod
    default: ''
    help:
      'Create empty mod assistant'

  prep:
    flags:
    - --prep
    action: store_const
    const: prep
    default: ''
    help:
      'Create empty prep assistant'

  task:
    flags:
    - --task
    action: store_const
    const: task
    default: ''
    help:
      'Create empty task assistant'

  snippet:
    flags:
    - --snippet
    action: store_const
    const: snippet
    default: ''
    help:
      'Create empty snippet'

run:
- if not $basename:
  - $basename~: $(basename $PWD)

- if $crt:
  - if $([ ! -f "assistants/crt/$basename.yaml" ]):
    - log_i: 'Creating empty crt assistant in assistants/crt/$basename.yaml'
    - cl: 'mkdir assistants/crt 2>/dev/null || :'
    - cl: 'echo "fullname: $basename" > "assistants/crt/$basename.yaml"'
  - else:
    - log_w: 'Ignoring --crt: assistants/crt/$basename.yaml already exists'

- if $mod:
  - if $([ ! -f "assistants/mod/$basename.yaml" ]):
    - log_i: 'Creating empty mod assistant in assistants/mod/$basename.yaml'
    - cl: 'mkdir assistants/mod 2>/dev/null || :'
    - cl: 'echo "fullname: $basename" > "assistants/mod/$basename.yaml"'
  - else:
    - log_w: 'Ignoring --mod: assistants/mod/$basename.yaml already exists'

- if $prep:
  - if $([ ! -f "assistants/prep/$basename.yaml" ]):
    - log_i: 'Creating empty prep assistant in assistants/prep/$basename.yaml'
    - cl: 'mkdir assistants/prep 2>/dev/null || :'
    - cl: 'echo "fullname: $basename" > "assistants/prep/$basename.yaml"'
  - else:
    - log_w: 'Ignoring --prep: assistants/prep/$basename.yaml already exists'

- if $task:
  - if $([ ! -f "assistants/task/$basename.yaml" ]):
    - log_i: 'Creating empty task assistant in assistants/task/$basename.yaml'
    - cl: 'mkdir assistants/task 2>/dev/null || :'
    - cl: 'echo "fullname: $basename" > "assistants/task/$basename.yaml"'
  - else:
    - log_w: 'Ignoring --task: assistants/task/$basename.yaml already exists'

- if $snippet:
  - if $([ ! -f "snippets/$basename.yaml" ]):
    - log_i: 'Creating empty snippet in snippets/$basename.yaml'
    - cl: mkdir snippets
    - cl: touch "snippets/$basename.yaml"
  - else:
    - log_w: 'Ignoring --snippet: snippets/$basename.yaml already exists'
